Develop Websites
Go Headless
/
Velo
Articles
API Overview
Getting Started
Tutorials
Velo Package Readmes
Release Notes
API Reference
$w
wix-activity-counters.v2
wix-analytics.v2
wix-animations-frontend
wix-auth
wix-automations
wix-billing.v2
wix-billing-backend
wix-blog-backend
wix-bookings-frontend
wix-bookings.v1
wix-bookings.v2
wix-bookings-backend
wix-business-tools.v2
wix-cache-backend
wix-captcha.v2
wix-captcha-backend
wix-chat-backend
Introduction
sendMessage()
Events
wix-comments.v2
wix-configs-backend
wix-crm-frontend
wix-crm.v2
wix-crm-backend
wix-dashboard
wix-dashboard-management.v2
wix-data
wix-data.v2
wix-ecom.v2
wix-ecom-frontend
wix-ecom-backend
wix-email-marketing.v2
wix-events-frontend
wix-events.v2
wix-events-backend
wix-fetch
wix-forms.v2
wix-forum.v2
wix-forum-backend
wix-groups.v2
wix-groups-backend
wix-http-functions
wix-inbox.v2
wix-location-frontend
wix-loyalty.v2
wix-marketing-backend
wix-marketing.v2
wix-marketing-tags.v2
wix-media-backend
wix-media.v2
wix-members-frontend
wix-members.v2
wix-members-backend
wix-mobile
wix-multilingual.v2
wix-navigate-mobile
wix-pay-frontend
wix-pay-backend
wix-payment
wix-payment-provider-backend
wix-pricing-plans-frontend
wix-pricing-plans.v2
wix-pricing-plans-backend
wix-pro-gallery-backend
wix-realtime-frontend
wix-realtime-backend
wix-reviews.v2
wix-restaurants.v2
wix-router
wix-search
wix-secrets-backend
wix-secrets-backend.v2
wix-seo-frontend
wix-site-frontend
wix-site-backend
wix-site-monitoring
wix-storage-frontend
wix-stores.v2
wix-stores-frontend
wix-stores-backend
wix-table-reservations.v2
wix-tags.v1
wix-urls.v2
wix-web-module
wix-window-frontend
$widget
wix-application
wix-editor
wix-widget
wix-site-plugins.v1
Introduction

Using the backend Chat API, site owners and contributors (referred to as the site's "business") can exchange chat messages with site members, contacts, and visitors (referred to as "visitors").

The backend Chat API is not applicable to social chat. For social chat between site members, use the client-side Chat API.

Note:

You cannot use a channel programmatically until it is created. A channel is created the first time the business or a visitor sends a message via the chatbox widget to a specific recipient.

To use the Chat API, import wixChat from the wix-chat-backend module:
Copy

import wixChatBackend from "wix-chat-backend";

Did this help?
sendMessage( )

Sends a chat message from the backend.

The sendMessage() function sends a text message to a specific channel from the backend. The message can be from the business to a visitor, or from a visitor to the business.
Method Declaration
Copy

function sendMessage(messageInfo: MessageInfo): Promise<void>;

Method Parameters
messageInfoMessageInfoRequired

An object representing the message to be sent.
channelIdstring

The ID of the channel to send the message to. Currently only IDs of business channels are supported.
messageTextstring

The content of the message.
metadataMetadata

An object representing additional contextual message information included in a chat message. The site visitor does not see the metadata.
sendAsVisitorboolean

Indicates whether the message is sent from the visitor to the business. If sendAsVisitor is true, the message is sent from the site visitor to the business. If sendAsVisitor is undefined or false, the message is sent from the business to the site visitor. The default is undefined.
Example shown:
JavaScript

import wixChatBackend from "wix-chat-backend";

export function sendChatMessage(
  messageText,
  channelId,
  metadata,
  sendAsVisitor,
) {
  wixChatBackend
    .sendMessage({
      messageText: messageText,
      channelId: channelId,
      metadata: { metadata },
      sendAsVisitor: sendAsVisitor,
    })
    .then(() => {
      console.log("Chat message sent");
    })
    .catch((error) => {
      console.log(error);
    });
}

Did this help?

On Mouse Out | Velo


Develop Websites
Go Headless
/
Velo
Articles
API Overview
Getting Started
Tutorials
Velo Package Readmes
Release Notes
API Reference
$w
wix-activity-counters.v2
wix-analytics.v2
wix-animations-frontend
wix-auth
wix-automations
wix-billing.v2
wix-billing-backend
wix-blog-backend
wix-bookings-frontend
wix-bookings.v1
wix-bookings.v2
wix-bookings-backend
wix-business-tools.v2
wix-cache-backend
wix-captcha.v2
wix-captcha-backend
wix-chat-backend
Introduction
sendMessage()
Events
wix-comments.v2
wix-configs-backend
wix-crm-frontend
wix-crm.v2
wix-crm-backend
wix-dashboard
wix-dashboard-management.v2
wix-data
wix-data.v2
wix-ecom.v2
wix-ecom-frontend
wix-ecom-backend
wix-email-marketing.v2
wix-events-frontend
wix-events.v2
wix-events-backend
wix-fetch
wix-forms.v2
wix-forum.v2
wix-forum-backend
wix-groups.v2
wix-groups-backend
wix-http-functions
wix-inbox.v2
wix-location-frontend
wix-loyalty.v2
wix-marketing-backend
wix-marketing.v2
wix-marketing-tags.v2
wix-media-backend
wix-media.v2
wix-members-frontend
wix-members.v2
wix-members-backend
wix-mobile
wix-multilingual.v2
wix-navigate-mobile
wix-pay-frontend
wix-pay-backend
wix-payment
wix-payment-provider-backend
wix-pricing-plans-frontend
wix-pricing-plans.v2
wix-pricing-plans-backend
wix-pro-gallery-backend
wix-realtime-frontend
wix-realtime-backend
wix-reviews.v2
wix-restaurants.v2
wix-router
wix-search
wix-secrets-backend
wix-secrets-backend.v2
wix-seo-frontend
wix-site-frontend
wix-site-backend
wix-site-monitoring
wix-storage-frontend
wix-stores.v2
wix-stores-frontend
wix-stores-backend
wix-table-reservations.v2
wix-tags.v1
wix-urls.v2
wix-web-module
wix-window-frontend
$widget
wix-application
wix-editor
wix-widget
wix-site-plugins.v1
Introduction

Using the backend Chat API, site owners and contributors (referred to as the site's "business") can exchange chat messages with site members, contacts, and visitors (referred to as "visitors").

The backend Chat API is not applicable to social chat. For social chat between site members, use the client-side Chat API.

Note:

You cannot use a channel programmatically until it is created. A channel is created the first time the business or a visitor sends a message via the chatbox widget to a specific recipient.

To use the Chat API, import wixChat from the wix-chat-backend module:
Copy

import wixChatBackend from "wix-chat-backend";

Did this help?
sendMessage( )

Sends a chat message from the backend.

The sendMessage() function sends a text message to a specific channel from the backend. The message can be from the business to a visitor, or from a visitor to the business.
Method Declaration
Copy

function sendMessage(messageInfo: MessageInfo): Promise<void>;

Method Parameters
messageInfoMessageInfoRequired

An object representing the message to be sent.
channelIdstring

The ID of the channel to send the message to. Currently only IDs of business channels are supported.
messageTextstring

The content of the message.
metadataMetadata

An object representing additional contextual message information included in a chat message. The site visitor does not see the metadata.
sendAsVisitorboolean

Indicates whether the message is sent from the visitor to the business. If sendAsVisitor is true, the message is sent from the site visitor to the business. If sendAsVisitor is undefined or false, the message is sent from the business to the site visitor. The default is undefined.
Example shown:
JavaScript

import wixChatBackend from "wix-chat-backend";

export function sendChatMessage(
  messageText,
  channelId,
  metadata,
  sendAsVisitor,
) {
  wixChatBackend
    .sendMessage({
      messageText: messageText,
      channelId: channelId,
      metadata: { metadata },
      sendAsVisitor: sendAsVisitor,
    })
    .then(() => {
      console.log("Chat message sent");
    })
    .catch((error) => {
      console.log(error);
    });
}

Did this help?

On Mouse Out | Velo



Develop Websites
Go Headless
/
Velo
Articles
API Overview
Getting Started
Tutorials
Velo Package Readmes
Release Notes
API Reference
$w
wix-activity-counters.v2
wix-analytics.v2
wix-animations-frontend
wix-auth
wix-automations
wix-billing.v2
wix-billing-backend
wix-blog-backend
wix-bookings-frontend
wix-bookings.v1
wix-bookings.v2
wix-bookings-backend
wix-business-tools.v2
wix-cache-backend
wix-captcha.v2
wix-captcha-backend
wix-chat-backend
Introduction
sendMessage()
Events
Introduction
onMessage()
wix-comments.v2
wix-configs-backend
wix-crm-frontend
wix-crm.v2
wix-crm-backend
wix-dashboard
wix-dashboard-management.v2
wix-data
wix-data.v2
wix-ecom.v2
wix-ecom-frontend
wix-ecom-backend
wix-email-marketing.v2
wix-events-frontend
wix-events.v2
wix-events-backend
wix-fetch
wix-forms.v2
wix-forum.v2
wix-forum-backend
wix-groups.v2
wix-groups-backend
wix-http-functions
wix-inbox.v2
wix-location-frontend
wix-loyalty.v2
wix-marketing-backend
wix-marketing.v2
wix-marketing-tags.v2
wix-media-backend
wix-media.v2
wix-members-frontend
wix-members.v2
wix-members-backend
wix-mobile
wix-multilingual.v2
wix-navigate-mobile
wix-pay-frontend
wix-pay-backend
wix-payment
wix-payment-provider-backend
wix-pricing-plans-frontend
wix-pricing-plans.v2
wix-pricing-plans-backend
wix-pro-gallery-backend
wix-realtime-frontend
wix-realtime-backend
wix-reviews.v2
wix-restaurants.v2
wix-router
wix-search
wix-secrets-backend
wix-secrets-backend.v2
wix-seo-frontend
wix-site-frontend
wix-site-backend
wix-site-monitoring
wix-storage-frontend
wix-stores.v2
wix-stores-frontend
wix-stores-backend
wix-table-reservations.v2
wix-tags.v1
wix-urls.v2
wix-web-module
wix-window-frontend
$widget
wix-application
wix-editor
wix-widget
wix-site-plugins.v1
Introduction

Wix Chat events are fired on your site's backend when certain events related to the Wix Chat application occur. You can write event handlers that react to these events. Event handler functions receive data that corresponds to the event that fired. Use event handlers to create custom responses to chat message events.

To add a chat event handler, add an events.js file to the Backend section of your site if one does not already exist. All event handler functions for your site are defined in this file.

Event handler functions are defined using the following pattern:
Copy

export function <wixAppName>_<eventName>(event) { }

For example, an event handler that handles backend chat messages looks like this:
Copy

export function wixChat_onMessage(event) {}

Note that backend events don't work when previewing your site.
Did this help?
onMessage( )

An event that fires when a chat message is sent to or from the business.

The onMessage() event handler runs when a backend chat message is sent to or from the business. The received SendMessageEvent object contains information about the message that was sent.

Note: Backend events don't work when previewing your site.
Method Declaration
Copy

function onMessage(event: SendMessageEvent): void;

Method Parameters
eventSendMessageEventRequired

The message data.
channelIdstring

ID of the channel on which the message was sent.
createdAtDate

Date and time the message was sent.
directionstring

Direction of the message. One of the following:

    "VisitorToBusiness": From a site visitor to the business.
    "BusinessToVisitor": From the business to a site visitor.

metadataMetadata

An object representing additional contextual message information included in a chat message. The site visitor does not see the metadata.
participantIdstring

The sender's member ID. For a message sent from the site's business, the site owner's member ID.
payloadMessagePayload

Content of the message. Currently only content of type text is included in the payload.
summarystring

First 250 characters of the chat message. Currently only text is included in the summary.
typestring

Type of message. Currently only TEXT is supported.
Example shown:
JavaScript

export function wixChat_onMessage(event) {
  const message = event.payload.text;
  const participant = event.participantId;
}

/*  Example SendMessageEvent object:
 *
 *  {
 *    "channelId": "23b345b6-c78d-9012-e3f4-567g89h0i01k",
 *    "type": "TEXT",
 *    "summary": "Hey, I've got a question about your products",
 *    "participantId": "12a345b6-e78f-8011-f3f5-567g89h0i12j",
 *    "direction": "VisitorToBusiness",
 *    "createdAt": "2019-10-27T06:02:12.008Z",
 *    "payload": {
 *      "text": "Hey, I've got a question about your products"
 *    },
 *    "metadata": {}
 *  }
 */

Did this help?

On Mouse Out | Velo
